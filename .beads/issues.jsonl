{"id":"gremlin-hxq","title":"wizardshit.ai MVP: Effect-TS Video Blog Platform","description":"Build MVP for wizardshit.ai - a video blog platform with Mux video hosting, BetterAuth (GitHub only), Next.js 16 RSC/Cache Components, and an Effect-TS router pattern inspired by uploadthing/trpc. TDD-first approach with CLI-first CMS. Spiritual successor to coursebuilder.\n\n## Architecture Decisions\n\n### Router Pattern (uploadthing-inspired)\n- `createWizardshit()` returns fluent builder: `.input().middleware().handler()`\n- `createRouteHandler()` returns `{ GET, POST }` for Next.js App Router\n- Effect-TS for service layer with dependency injection via Context.Tag\n- Typed client inference for end-to-end type safety\n\n### Key References\n- uploadthing: packages/uploadthing/src/_internal/upload-builder.ts (builder pattern)\n- uploadthing: packages/uploadthing/src/_internal/handler.ts (Effect HttpRouter)\n- coursebuilder: packages/core/src/lib/index.ts (router dispatch)\n- coursebuilder: packages/adapter-drizzle/src/lib/mysql/schemas/content/ (data model)\n\n### Tech Stack\n- Bun runtime + Turborepo\n- Effect-TS for services, errors, DI\n- BetterAuth with GitHub OAuth\n- Drizzle + SQLite (local) / Turso (prod)\n- Mux for video hosting\n- Next.js 16 with RSC + Cache Components\n\n### TDD Approach\n- Tests first for all core logic\n- MemoryAdapter for database testing\n- Mocked Mux API for video tests\n- Characterization tests for legacy pattern extraction","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-16T12:33:23.714672-08:00","updated_at":"2025-12-16T12:33:23.714672-08:00"}
{"id":"gremlin-hxq.1","title":"Foundation: Monorepo packages structure + Effect-TS core types","description":"Set up packages structure with @badass namespace. Create packages/core with Effect-TS service definitions, error types, and the router builder pattern. Reference uploadthing's _internal/upload-builder.ts for the fluent builder API. Define core types: GremlinConfig, ProcedureRouter, AdapterArguments context. Use Effect.Service pattern for dependency injection. TDD: Write tests for builder pattern first.\n\nPackage: @badass/core\nFiles: packages/core/**","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-16T12:33:23.781964-08:00","updated_at":"2025-12-16T12:35:38.348246-08:00","dependencies":[{"issue_id":"gremlin-hxq.1","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:23.782314-08:00","created_by":"daemon"}]}
{"id":"gremlin-hxq.2","title":"Database: Drizzle schema + adapter interface","description":"Create packages/db with Drizzle schemas inspired by coursebuilder's content-resource pattern. Tables: users, sessions, accounts (for BetterAuth), content_resources (type, fields JSON, createdById), content_resource_versions, video_resources (muxAssetId, muxPlaybackId, duration, status). Define Adapter interface following coursebuilder's adapter.ts pattern but simplified for MVP. Include MemoryAdapter for testing. Use SQLite for local dev, Turso-compatible. TDD: Characterization tests for schema operations.\n\nPackage: @badass/db\nFiles: packages/db/**","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-16T12:33:23.846788-08:00","updated_at":"2025-12-16T12:35:41.484226-08:00","dependencies":[{"issue_id":"gremlin-hxq.2","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:23.84712-08:00","created_by":"daemon"}]}
{"id":"gremlin-hxq.3","title":"Auth: BetterAuth setup with GitHub OAuth","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T12:33:23.915833-08:00","updated_at":"2025-12-16T12:33:23.915833-08:00","dependencies":[{"issue_id":"gremlin-hxq.3","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:23.916177-08:00","created_by":"daemon"}]}
{"id":"gremlin-hxq.4","title":"Router: Effect-TS procedure router with Next.js adapter","description":"Create packages/next that wraps @badass/core for Next.js. Follow uploadthing's pattern: createGremlin() returns a builder, createRouteHandler() creates { GET, POST } handlers. Use Effect HttpRouter for routing, HttpServerRequest/Response for request handling. The router pattern: define procedures with .input().middleware().handler() chain. Export typed client inference. Reference uploadthing's effect-platform.ts adapter. TDD: Test router with mock procedures.\n\nPackage: @badass/next\nFiles: packages/next/**","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T12:33:23.975455-08:00","updated_at":"2025-12-16T12:35:44.717394-08:00","dependencies":[{"issue_id":"gremlin-hxq.4","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:23.975769-08:00","created_by":"daemon"}]}
{"id":"gremlin-hxq.5","title":"Video: Mux service layer with Effect-TS","description":"Create Mux integration as an Effect service in @badass/core. Define MuxService with createAsset, getAsset, deleteAsset, getPlaybackId operations. Use Effect.tryPromise for Mux API calls. Create MuxServiceLive layer that requires MuxConfig. Reference coursebuilder's lib/mux.ts but wrap in Effect. Add webhook handler for asset.ready events. TDD: Test with mocked Mux API responses.\n\nFiles: packages/core/src/services/mux.ts, apps/wizardshit-ai/src/app/api/webhooks/mux/route.ts","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T12:33:24.038114-08:00","updated_at":"2025-12-16T12:35:47.802534-08:00","dependencies":[{"issue_id":"gremlin-hxq.5","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:24.038773-08:00","created_by":"daemon"}]}
{"id":"gremlin-hxq.6","title":"Content: Video post procedures + CRUD operations","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T12:33:24.106444-08:00","updated_at":"2025-12-16T12:33:24.106444-08:00","dependencies":[{"issue_id":"gremlin-hxq.6","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:24.106943-08:00","created_by":"daemon"}]}
{"id":"gremlin-hxq.7","title":"UI: Video blog display with RSC + Cache Components","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T12:33:24.176227-08:00","updated_at":"2025-12-16T12:33:24.176227-08:00","dependencies":[{"issue_id":"gremlin-hxq.7","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:24.176549-08:00","created_by":"daemon"}]}
{"id":"gremlin-hxq.8","title":"CLI: Basic content management commands","description":"Create packages/cli with Bun for CLI-first CMS with TUI support.\n\n**Core Commands:**\n- `badass post create --title \"Title\"` - interactive mode, prompts for video\n- `badass post create --title \"Title\" --video ./path/to/video.mp4` - direct upload\n- `badass post create --title \"Title\" --video-url \"https://...\"` - from URL\n- `badass post list` - table view of posts with status\n- `badass post get \u003cid\u003e` - detailed view\n- `badass post delete \u003cid\u003e`\n\n**Upload Flow (TUI):**\n- Upload progress bar with speed/ETA\n- Mux processing status (waiting → processing → ready)\n- Webhook polling or SSE for real-time status\n- Final playback URL when ready\n\n**TUI Libraries:**\n- @clack/prompts for interactive prompts\n- ink or blessed for rich TUI (progress, spinners, tables)\n- Consider @inquirer/prompts as alternative\n\n**Architecture:**\n- Use @badass/core router client directly (not HTTP)\n- Chunk uploads for large files\n- Resume interrupted uploads (store state in ~/.badass/uploads/)\n- Background processing option: `badass post create ... --background`\n\nPackage: @badass/cli\nBinary: badass\nConfig: ~/.badass/config.json\nFiles: packages/cli/**","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T12:33:24.240305-08:00","updated_at":"2025-12-16T12:38:57.318444-08:00","dependencies":[{"issue_id":"gremlin-hxq.8","depends_on_id":"gremlin-hxq","type":"parent-child","created_at":"2025-12-16T12:33:24.240642-08:00","created_by":"daemon"}]}
{"id":"gremlin-u0s","title":"wizardshit.ai Monorepo Setup","description":"Initialize Turborepo + Bun monorepo with Next.js app, AGENTS.md, course-builder submodule, oxlint, and biome","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T11:49:51.394197-08:00","updated_at":"2025-12-16T11:57:12.852672-08:00","closed_at":"2025-12-16T11:57:12.852672-08:00"}
{"id":"gremlin-u0s.1","title":"Initialize monorepo root structure","description":"Blocked on file conflicts: package.json and turbo.json are reserved by SilverDawn. Awaiting coordinator decision on conflict resolution.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T11:49:51.536135-08:00","updated_at":"2025-12-16T11:53:11.950172-08:00","closed_at":"2025-12-16T11:53:11.950172-08:00","dependencies":[{"issue_id":"gremlin-u0s.1","depends_on_id":"gremlin-u0s","type":"parent-child","created_at":"2025-12-16T11:49:51.536543-08:00","created_by":"daemon"}]}
{"id":"gremlin-u0s.2","title":"Create AGENTS.md from existing configs","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T11:49:51.663025-08:00","updated_at":"2025-12-16T11:53:12.872143-08:00","closed_at":"2025-12-16T11:53:12.872143-08:00","dependencies":[{"issue_id":"gremlin-u0s.2","depends_on_id":"gremlin-u0s","type":"parent-child","created_at":"2025-12-16T11:49:51.66335-08:00","created_by":"daemon"}]}
{"id":"gremlin-u0s.3","title":"Clone course-builder as submodule","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T11:49:51.740143-08:00","updated_at":"2025-12-16T11:53:13.776019-08:00","closed_at":"2025-12-16T11:53:13.776019-08:00","dependencies":[{"issue_id":"gremlin-u0s.3","depends_on_id":"gremlin-u0s","type":"parent-child","created_at":"2025-12-16T11:49:51.740871-08:00","created_by":"daemon"}]}
{"id":"gremlin-u0s.4","title":"Configure oxlint and biome","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:49:51.857434-08:00","updated_at":"2025-12-16T11:55:41.895121-08:00","closed_at":"2025-12-16T11:55:41.895121-08:00","dependencies":[{"issue_id":"gremlin-u0s.4","depends_on_id":"gremlin-u0s","type":"parent-child","created_at":"2025-12-16T11:49:51.857787-08:00","created_by":"daemon"}]}
{"id":"gremlin-u0s.5","title":"Create Next.js app in apps/wizardshit-ai","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:49:51.990604-08:00","updated_at":"2025-12-16T11:55:42.280879-08:00","closed_at":"2025-12-16T11:55:42.280879-08:00","dependencies":[{"issue_id":"gremlin-u0s.5","depends_on_id":"gremlin-u0s","type":"parent-child","created_at":"2025-12-16T11:49:51.991343-08:00","created_by":"daemon"}]}
{"id":"gremlin-u0s.6","title":"Cleanup old files and verify setup","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T11:49:52.129848-08:00","updated_at":"2025-12-16T11:57:11.130842-08:00","closed_at":"2025-12-16T11:57:11.130842-08:00","dependencies":[{"issue_id":"gremlin-u0s.6","depends_on_id":"gremlin-u0s","type":"parent-child","created_at":"2025-12-16T11:49:52.130803-08:00","created_by":"daemon"}]}
